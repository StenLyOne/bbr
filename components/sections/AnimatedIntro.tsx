"use client";

import { useEffect, useRef, useState } from "react";
import { gsap } from "../../lib/gsap";
import Image from "next/image";

export default function PageIntro({ onFinish }: { onFinish: () => void }) {
  const containerRef = useRef<HTMLDivElement>(null);
  const logoRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    const tl = gsap.timeline({
      onComplete: () => {
        // плавное исчезновение интро
        gsap.to(containerRef.current, {
          opacity: 0,
          duration: 0.5,
          onComplete: onFinish,
        });
      },
    });

    // начальная анимация логотипа
    tl.set(containerRef.current, { opacity: 1 });
    tl.fromTo(
      logoRef.current,
      { clipPath: "inset(0 100% 0 0)", opacity: 0 },
      {
        clipPath: "inset(0 0% 0 0)",
        opacity: 1,
        duration: 1,
        ease: "power4.out",
      }
    );

    // держим на экране 2 секунды
    tl.to({}, { duration: 2 });
  }, [onFinish]);

  return (
    <div
      ref={containerRef}
      className="fixed inset-0 z-[9999] bg-blue flex items-center justify-center transition-opacity duration-500"
    >
      <svg
        width="132"
        height="55"
        viewBox="0 0 132 55"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        className="scale-200"
      >
        <g clipPath="url(#clip0_1274_439)">
          <path
            d="M70.97 38.5426H76.992V38.6804C76.975 42.47 74.7878 44.8127 71.1965 44.8127C67.3616 44.8127 64.8274 42.1085 64.8274 38.5595C64.8274 35.0105 67.4128 32.3063 71.0053 32.3063C73.4178 32.3063 75.3261 33.5115 76.1943 35.4069L75.3443 35.8034C74.6501 34.1836 73.0536 33.1682 71.0065 33.1682C67.9181 33.1682 65.7833 35.4939 65.7833 38.5595C65.7833 41.6251 67.8657 43.9508 71.1976 43.9508C74.0607 43.9508 75.7619 42.2113 76.0566 39.3863H70.9723V38.5426H70.97Z"
            fill="white"
          />
          <path
            d="M88.0631 44.6399H86.9183L82.9446 39.4033H80.3763V44.6399H79.4568V32.4791H83.1005C85.9112 32.4791 86.9524 33.8922 86.9524 35.8554C86.9524 37.8185 85.8589 39.0249 83.9676 39.2655L88.0631 44.6399ZM80.3763 33.3399V38.5414H82.8752C84.8529 38.5414 85.9988 37.7666 85.9988 35.8542C85.9988 34.0628 85.027 33.3387 82.9446 33.3387H80.3763V33.3399Z"
            fill="white"
          />
          <path
            d="M89.2613 38.5595C89.2613 35.0116 91.882 32.3063 95.5427 32.3063C99.2035 32.3063 101.824 35.0105 101.824 38.5595C101.824 42.1085 99.2035 44.8127 95.5427 44.8127C91.882 44.8127 89.2613 42.1085 89.2613 38.5595ZM100.888 38.5595C100.888 35.4939 98.7017 33.1682 95.5427 33.1682C92.3838 33.1682 90.2149 35.4939 90.2149 38.5595C90.2149 41.6251 92.4009 43.9508 95.5427 43.9508C98.6846 43.9508 100.888 41.6251 100.888 38.5595Z"
            fill="white"
          />
          <path
            d="M104.377 39.7659V32.4791H105.296V39.7308C105.296 42.47 106.337 43.9508 108.975 43.9508C111.613 43.9508 112.654 42.47 112.654 39.7308V32.4791H113.573V39.7659C113.573 42.9704 112.168 44.8127 108.975 44.8127C105.782 44.8127 104.377 42.9693 104.377 39.7659Z"
            fill="white"
          />
          <path
            d="M116.628 44.6399V32.4791H120.445C123.274 32.4791 124.316 33.9091 124.316 35.9582C124.316 38.3867 122.824 39.6269 120.359 39.6269H117.548V44.6399H116.629H116.628ZM117.548 38.7832H120.238C122.268 38.7832 123.362 37.9563 123.362 35.9582C123.362 34.1328 122.46 33.3399 120.308 33.3399H117.548V38.7832Z"
            fill="white"
          />
          <path
            d="M65.3771 52.8234V48.9141H67.7144V49.4009H65.9119V50.6197H67.4845V51.1065H65.9119V52.3355H67.7645V52.8223H65.3771V52.8234Z"
            fill="white"
          />
          <path
            d="M71.1225 48.9129H71.6915L70.2907 52.8223H69.6887L68.2822 48.9129H68.8512L69.9891 52.1751L71.1214 48.9129H71.1225Z"
            fill="white"
          />
          <path
            d="M72.4164 52.8234V48.9141H74.7537V49.4009H72.9512V50.6197H74.5238V51.1065H72.9512V52.3355H74.8038V52.8223H72.4164V52.8234Z"
            fill="white"
          />
          <path
            d="M75.7357 52.8234V48.9141H76.2262L78.2847 51.8441V48.9141H78.8207V52.8234H78.3302L76.2717 49.8945V52.8234H75.7357Z"
            fill="white"
          />
          <path
            d="M80.8166 52.8234V49.4009H79.6229V48.9141H82.5463V49.4009H81.3526V52.8234H80.8166Z"
            fill="white"
          />
          <path
            d="M83.0538 52.0362L83.517 51.8035C83.6615 52.1796 84.0074 52.3908 84.5047 52.3908C85.002 52.3908 85.2853 52.1807 85.2853 51.7425C85.2853 51.3324 85.0339 51.2443 84.4262 51.1223C83.7685 50.9891 83.171 50.7959 83.171 49.9872C83.171 49.245 83.7127 48.852 84.4262 48.852C85.0339 48.852 85.5027 49.1343 85.72 49.611L85.2512 49.855C85.0953 49.5229 84.8108 49.3456 84.4364 49.3456C84.0017 49.3456 83.7218 49.5726 83.7218 49.977C83.7218 50.4593 84.0291 50.5248 84.6253 50.631C85.3058 50.753 85.8361 51.0015 85.8361 51.7436C85.8361 52.4857 85.3343 52.8844 84.5081 52.8844C83.7776 52.8844 83.2473 52.5738 83.0516 52.0373L83.0538 52.0362Z"
            fill="white"
          />
          <path
            d="M87.4497 52.8935L88.7652 48.8429H89.2636L87.9481 52.8935H87.4497Z"
            fill="white"
          />
          <path
            d="M91.354 52.8234V48.9141H92.7434C93.6526 48.9141 93.9929 49.3851 93.9929 50.0775C93.9929 50.875 93.5126 51.2906 92.7206 51.2906H91.8899V52.8246H91.354V52.8234ZM91.8899 50.8016H92.6262C93.1508 50.8016 93.441 50.6626 93.441 50.0764C93.441 49.5613 93.2395 49.4009 92.6319 49.4009H91.8899V50.8016Z"
            fill="white"
          />
          <path
            d="M97.8528 52.8234H97.1893L95.9899 51.2342H95.388V52.8234H94.852V48.9141H96.1914C97.1006 48.9141 97.4408 49.3738 97.4408 50.0493C97.4408 50.675 97.1279 51.0512 96.5817 51.1461L97.8539 52.8246L97.8528 52.8234ZM95.3868 49.4009V50.7462H96.073C96.5475 50.7462 96.8878 50.6412 96.8878 50.0481C96.8878 49.5105 96.6261 49.3998 96.0787 49.3998H95.3868V49.4009Z"
            fill="white"
          />
          <path
            d="M99.158 52.8935L100.473 48.8429H100.972L99.6564 52.8935H99.158Z"
            fill="white"
          />
          <path
            d="M103.008 52.8234V48.9141H104.246C105.568 48.9141 106.237 49.7341 106.237 50.8693C106.237 52.0045 105.607 52.8246 104.29 52.8246H103.007L103.008 52.8234ZM103.542 52.3355H104.301C105.284 52.3355 105.685 51.7097 105.685 50.8682C105.685 50.0267 105.245 49.4009 104.257 49.4009H103.542V52.3355Z"
            fill="white"
          />
          <path
            d="M107.174 52.8234V48.9141H107.71V52.8234H107.174Z"
            fill="white"
          />
          <path
            d="M110.655 50.7631H112.607V50.8738C112.607 52.087 111.898 52.8844 110.71 52.8844C109.522 52.8844 108.646 52.0542 108.646 50.8682C108.646 49.6822 109.528 48.852 110.655 48.852C111.414 48.852 112.071 49.2281 112.35 49.8493L111.848 50.0877C111.675 49.6167 111.195 49.3456 110.655 49.3456C109.84 49.3456 109.198 49.9713 109.198 50.8682C109.198 51.7651 109.823 52.3908 110.71 52.3908C111.481 52.3908 111.927 51.9255 112.05 51.25H110.655V50.762V50.7631Z"
            fill="white"
          />
          <path
            d="M113.521 52.8234V48.9141H114.057V52.8234H113.521Z"
            fill="white"
          />
          <path
            d="M116.081 52.8234V49.4009H114.888V48.9141H117.811V49.4009H116.617V52.8234H116.081Z"
            fill="white"
          />
          <path
            d="M120.7 52.8234L120.349 51.8769H118.647L118.296 52.8234H117.727L119.199 48.9141H119.803L121.269 52.8234H120.7ZM119.496 49.5173L118.827 51.3833H120.172L119.498 49.5173H119.496Z"
            fill="white"
          />
          <path
            d="M121.938 52.8234V48.9141H122.474V52.3366H124.31V52.8234H121.938Z"
            fill="white"
          />
          <path
            d="M82.5088 22.0783C82.5088 25.3833 80.7802 28.1801 74.7935 28.1801H65.3805V5.74385H74.6012C79.6924 5.74385 81.933 7.96906 81.933 11.369C81.933 13.9116 80.6846 15.755 78.2517 16.6124C81.0374 17.3116 82.5099 19.0273 82.5099 22.0783H82.5088ZM70.9826 10.4462V14.7689H73.4155C75.2726 14.7689 76.233 14.0381 76.233 12.6081C76.233 11.1781 75.5286 10.4473 73.4473 10.4473H70.9814L70.9826 10.4462ZM73.8638 23.4439C76.0088 23.4439 76.7451 22.6182 76.7451 21.2831C76.7451 19.7254 75.6242 19.1855 73.8638 19.1855H70.9826V23.4439H73.8638Z"
            fill="white"
          />
          <path
            d="M102.517 22.0783C102.517 25.3833 100.789 28.1801 94.8019 28.1801H85.3889V5.74385H94.6096C99.7008 5.74385 101.941 7.96906 101.941 11.369C101.941 13.9116 100.693 15.755 98.2601 16.6124C101.046 17.3116 102.518 19.0273 102.518 22.0783H102.517ZM90.991 10.4462V14.7689H93.4239C95.281 14.7689 96.2414 14.0381 96.2414 12.6081C96.2414 11.1781 95.5371 10.4473 93.4558 10.4473H90.9898L90.991 10.4462ZM93.8722 23.4439C96.0173 23.4439 96.7535 22.6182 96.7535 21.2831C96.7535 19.7254 95.6326 19.1855 93.8722 19.1855H90.991V23.4439H93.8722Z"
            fill="white"
          />
          <path
            d="M124.382 28.1801H117.722L112.664 19.9807H110.999V28.1801H105.396V5.74385H114.393C119.516 5.74385 121.852 8.54061 121.852 12.703C121.852 15.7539 120.475 17.6922 118.203 18.5507L124.382 28.1801ZM110.999 10.7014V15.6274H113.241C115.13 15.6274 116.059 14.8966 116.059 13.1797C116.059 11.4628 115.322 10.7014 113.305 10.7014H110.999Z"
            fill="white"
          />
          <path
            d="M125.501 25.2873C125.501 23.4755 126.878 22.1731 128.735 22.1731C130.592 22.1731 132.001 23.4766 132.001 25.2873C132.001 27.098 130.624 28.4659 128.735 28.4659C126.846 28.4659 125.501 27.1307 125.501 25.2873Z"
            fill="white"
          />
          <path
            d="M54.8613 9.52326C53.6062 8.54732 51.8936 8.73935 49.7736 10.0925C48.8519 10.681 45.9376 10.2823 44.159 9.38884C44.0361 9.14147 43.9041 8.89974 43.7664 8.66141C42.8652 7.10828 41.6464 5.75734 40.2001 4.69895C40.6223 4.18049 40.818 3.49711 40.7042 2.81373C40.5392 1.8186 39.7563 1.03018 38.7583 0.853967C38.2497 0.762474 37.2972 0.660814 36.1479 0.857356C36.0648 0.755696 35.9715 0.659685 35.8691 0.57158C35.2 -0.00787891 34.2726 -0.159238 33.4499 0.173978C32.791 0.442811 31.3595 1.12958 30.2864 2.38902C24.0971 3.44176 19.5545 8.71563 19.5545 15.0671C19.5545 16.6936 19.8583 18.2806 20.4591 19.7897C20.6162 20.2359 22.0648 24.0481 26.6336 26.9206C23.1868 26.5885 19.8059 27.1374 16.3432 28.5889C12.7223 30.1059 8.79636 30.4448 6.34296 29.453C5.76147 29.2181 5.00929 28.7968 4.72481 28.1247C4.26963 27.0505 3.14876 26.4563 1.99489 26.6766C0.842156 26.898 0.0228383 27.866 0.00349334 29.0306C-0.0636452 33.0506 0.711293 46.5962 13.5302 52.1005C14.8718 52.6765 16.2499 53.1645 17.6473 53.5678C20.9609 54.5245 24.3896 55.0012 27.7385 55.0012C33.5625 55.0012 39.1464 53.5678 43.4649 50.7484C48.0713 47.7404 50.6054 43.4368 50.5986 38.6317C50.5918 33.2122 48.3205 29.7354 46.4952 26.942C44.7143 24.2164 43.7892 22.6486 44.3604 20.3489C50.3733 19.0962 54.6508 16.5875 55.6545 13.6676C56.4875 11.2458 55.5145 10.0327 54.8613 9.52438V9.52326ZM53.5197 12.9435C52.7971 15.0456 48.8007 17.3352 42.6956 18.3834C42.5659 18.7754 42.4157 19.1583 42.2427 19.5277H42.245C40.282 26.4733 48.3307 29.0261 48.3432 38.6317C48.3569 49.5149 33.014 55.4055 18.8102 51.5662C17.3298 51.1663 15.8618 50.6603 14.4246 50.0436C3.16583 45.2114 2.18606 33.3771 2.25889 29.0678C2.26231 28.8521 2.56158 28.7945 2.64579 28.9933C4.1308 32.5017 10.7366 33.3692 17.2217 30.6515C21.4651 28.8736 24.9107 28.8611 27.6509 29.3107C28.3849 29.4304 29.1473 29.1864 29.6332 28.6262C31.1091 26.9228 28.0435 25.1573 28.0435 25.1573H28.0458C23.7512 22.5458 22.5893 19.0521 22.5893 19.0521H22.5916C22.0898 17.8221 21.8121 16.4779 21.8121 15.0693C21.8121 9.51761 26.0999 4.96214 31.5677 4.48208C32.2687 3.16389 33.8208 2.4455 34.3079 2.24783C34.3693 2.22298 34.4308 2.28172 34.4148 2.3461C34.078 3.63266 34.2703 4.00654 34.2703 4.00654C35.9556 2.81938 37.625 2.92895 38.3612 3.06111C38.4966 3.08483 38.5273 3.26329 38.4067 3.32881C37.4065 3.87325 36.7385 4.52839 36.2913 5.11801C39.0599 6.15155 41.2823 8.28866 42.4157 10.9905C42.4316 10.9962 42.4487 10.9962 42.4635 11.0052C44.39 12.2477 48.8519 13.3456 50.9946 11.9789C53.2671 10.5286 54.1661 11.0741 53.522 12.9458L53.5197 12.9435Z"
            fill="white"
          />
        </g>
        <defs>
          <clipPath id="clip0_1274_439">
            <rect width="132" height="55" fill="white" />
          </clipPath>
        </defs>
      </svg>
    </div>
  );
}
